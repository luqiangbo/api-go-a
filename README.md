# API Go B - Serverless å»¶è¿Ÿæ¥å£æœåŠ¡

è¿™æ˜¯ä¸€ä¸ªéƒ¨ç½²åœ¨ Vercel ä¸Šçš„ Golang Serverless å‡½æ•°æœåŠ¡ï¼Œä½¿ç”¨ Gin æ¡†æ¶æä¾›å»¶è¿Ÿæ¥å£ã€‚

## åŠŸèƒ½ç‰¹æ€§

- ğŸš€ åŸºäº Gin æ¡†æ¶çš„è½»é‡çº§ API æœåŠ¡
- â° æä¾›å»¶è¿Ÿæ¥å£ï¼Œæ”¯æŒè‡ªå®šä¹‰å»¶è¿Ÿæ—¶é—´
- ğŸŒ æ”¯æŒ CORS è·¨åŸŸè¯·æ±‚
- ğŸ“Š å¥åº·æ£€æŸ¥æ¥å£
- ğŸ”’ è¾“å…¥éªŒè¯å’Œé”™è¯¯å¤„ç†

## API æ¥å£

### 1. å¥åº·æ£€æŸ¥æ¥å£

**GET /**

è¿”å›æœåŠ¡çŠ¶æ€ä¿¡æ¯

**å“åº”ç¤ºä¾‹ï¼š**

```json
{
  "message": "APIæœåŠ¡æ­£å¸¸è¿è¡Œ",
  "timestamp": "2024-01-01T12:00:00Z"
}
```

### 2. å»¶è¿Ÿæ¥å£

**POST /delay**

æ ¹æ®æŒ‡å®šæ—¶é—´å»¶è¿Ÿåè¿”å›å“åº”

**è¯·æ±‚ä½“ï¼š**

```json
{
  "time": 5
}
```

**å‚æ•°è¯´æ˜ï¼š**

- `time`: å»¶è¿Ÿæ—¶é—´ï¼ˆç§’ï¼‰ï¼ŒèŒƒå›´ï¼š0-60 ç§’

**å“åº”ç¤ºä¾‹ï¼š**

```json
{
  "message": "å»¶è¿Ÿå®Œæˆï¼",
  "delay_time": 5,
  "timestamp": "2024-01-01T12:00:05Z"
}
```

## é¡¹ç›®ç»“æ„

```
api-go-b/
â”œâ”€â”€ api/
â”‚   â””â”€â”€ index.go      # Vercel serverless å‡½æ•°å…¥å£
â”œâ”€â”€ dev.go            # æœ¬åœ°å¼€å‘æœåŠ¡å™¨
â”œâ”€â”€ go.mod            # Go æ¨¡å—é…ç½®
â”œâ”€â”€ vercel.json       # Vercel éƒ¨ç½²é…ç½®
â””â”€â”€ README.md         # é¡¹ç›®æ–‡æ¡£
```

## æœ¬åœ°å¼€å‘

### ç¯å¢ƒè¦æ±‚

- Go 1.21+

### å®‰è£…ä¾èµ–

```bash
go mod tidy
```

### è¿è¡ŒæœåŠ¡

#### æœ¬åœ°å¼€å‘æœåŠ¡å™¨

```bash
go run dev.go
```

#### 2. ä½¿ç”¨ Makefile (Linux/Mac)

```bash
make run          # è¿è¡Œé¡¹ç›®
make build        # æ„å»ºé¡¹ç›®
make test         # è¿è¡Œæµ‹è¯•
make deps         # å®‰è£…ä¾èµ–
make fmt          # æ ¼å¼åŒ–ä»£ç 
make dev          # å¼€å‘æ¨¡å¼(çƒ­é‡è½½)
make clean        # æ¸…ç†æ–‡ä»¶
```

#### 3. çƒ­é‡è½½å¼€å‘æ¨¡å¼

å®‰è£… air å·¥å…·ï¼š

```bash
go install github.com/cosmtrek/air@latest
```

ç„¶åè¿è¡Œï¼š

```bash
air
```

æœåŠ¡å°†åœ¨ `http://localhost:8080` å¯åŠ¨

### æµ‹è¯•æ¥å£

ä½¿ç”¨ curl æµ‹è¯•å»¶è¿Ÿæ¥å£ï¼š

```bash
curl -X POST http://localhost:8080/delay \
  -H "Content-Type: application/json" \
  -d '{"time": 3}'
```

## éƒ¨ç½²åˆ° Vercel

1. å®‰è£… Vercel CLIï¼š

```bash
npm i -g vercel
```

2. ç™»å½• Vercelï¼š

```bash
vercel login
```

3. éƒ¨ç½²é¡¹ç›®ï¼š

```bash
vercel
```

4. ç”Ÿäº§ç¯å¢ƒéƒ¨ç½²ï¼š

```bash
vercel --prod
```

## é¡¹ç›®ç»“æ„

```
api-go-two/
â”œâ”€â”€ main.go          # ä¸»ç¨‹åºæ–‡ä»¶
â”œâ”€â”€ go.mod           # Goæ¨¡å—æ–‡ä»¶
â”œâ”€â”€ vercel.json      # Vercelé…ç½®æ–‡ä»¶
â”œâ”€â”€ Makefile         # Makefileè„šæœ¬
â”œâ”€â”€ .air.toml        # çƒ­é‡è½½é…ç½®
â””â”€â”€ README.md        # é¡¹ç›®è¯´æ˜æ–‡æ¡£
```

## æ³¨æ„äº‹é¡¹

- å»¶è¿Ÿæ—¶é—´é™åˆ¶åœ¨ 0-60 ç§’ä¹‹é—´
- Vercel å‡½æ•°æœ€å¤§æ‰§è¡Œæ—¶é—´ä¸º 60 ç§’
- æœåŠ¡æ”¯æŒ CORS è·¨åŸŸè¯·æ±‚
- æ‰€æœ‰æ¥å£éƒ½è¿”å› JSON æ ¼å¼æ•°æ®
